{"filter":false,"title":"comments.js","tooltip":"/YelpCamp/v10/routes/comments.js","undoManager":{"mark":13,"position":13,"stack":[[{"start":{"row":92,"column":0},"end":{"row":113,"column":1},"action":"remove","lines":["function checkCommentOwnership(req, res, next){","        if(req.isAuthenticated()){","","        Comment.findById(req.params.comment_id, function(err,foundComment){","        if(err){","            res.redirect(\"back\");","        } else {","            // does the user own the comment","            //if(foundCampground.author.id.equals(req.user._id)){","            if(foundComment.author.id.equals(req.user._id)){","                 next();","            }else {","                res.redirect(\"back\");","            }","            ","           ","        }","    });","    } else {","       res.redirect(\"back\");","    }","}"],"id":361}],[{"start":{"row":83,"column":0},"end":{"row":89,"column":1},"action":"remove","lines":["//middleware","function isLoggedIn(req,res,next){","    if(req.isAuthenticated()){","        return next();","    }","    res.redirect(\"/login\");","}"],"id":362}],[{"start":{"row":7,"column":19},"end":{"row":7,"column":29},"action":"insert","lines":["middleware"],"id":363}],[{"start":{"row":7,"column":29},"end":{"row":7,"column":30},"action":"insert","lines":["."],"id":364}],[{"start":{"row":19,"column":17},"end":{"row":19,"column":27},"action":"insert","lines":["middleware"],"id":365}],[{"start":{"row":19,"column":27},"end":{"row":19,"column":28},"action":"insert","lines":["."],"id":366}],[{"start":{"row":47,"column":32},"end":{"row":47,"column":42},"action":"insert","lines":["middleware"],"id":367}],[{"start":{"row":47,"column":42},"end":{"row":47,"column":43},"action":"insert","lines":["."],"id":368}],[{"start":{"row":59,"column":27},"end":{"row":59,"column":37},"action":"insert","lines":["middleware"],"id":369}],[{"start":{"row":59,"column":37},"end":{"row":59,"column":38},"action":"insert","lines":["."],"id":370}],[{"start":{"row":73,"column":29},"end":{"row":73,"column":39},"action":"insert","lines":["middleware"],"id":371}],[{"start":{"row":73,"column":39},"end":{"row":73,"column":40},"action":"insert","lines":["."],"id":372}],[{"start":{"row":3,"column":43},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":374}],[{"start":{"row":4,"column":0},"end":{"row":4,"column":69},"action":"insert","lines":["var middleware = require(\"../middleware\") // dont have to do index.js"],"id":375}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":4,"column":69},"end":{"row":4,"column":69},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1541442290744,"hash":"fcd90c445fd19c2e471fae0577c13f4dd0bc652a"}